<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ results.name }}</title>
    {% load static %}
    {% load django_bootstrap5 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel = "stylesheet" href = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <link rel="icon" type="image/png" href="{% static 'images/Travelia_Logo.png' %}">
    <script src="{% static 'js/scripts.js' %}"></script>
    <style>
        .content {
            display: flex;
            justify-content: space-evenly;
            margin-top: 20px;
        }

        .carousel-item img {
            margin-left: 20px;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
        }

        .map, .info {
            margin: 20px auto;
            max-width: 900px;
        }
    </style>
</head>
<body>
    {% include 'blog/sections/navbar.html' %}

    <!-- Carrusel de imágenes -->
    <div class="content">
        <div id="carouselExampleInterval" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <div class="carousel-inner">
                {% for image in results.image_url %}
                    <div class="carousel-item {% if forloop.first %}active{% endif %}" data-bs-interval="3000" style="display: flex;">
                        <img src="{{ image }}" class="d-block" style="flex: 1;" alt="Foto">
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="card shadow-sm" style="flex: 1; margin: 0 20px; min-width: 48%; max-height: 400px;">
            <div class="card-body">
                <h5 class="card-title">Mapa</h5>
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d194347.47827054537!2d-3.8443426076978033!3d40.438098610155286!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd422997800a3c81%3A0xc436dec1618c2269!2sMadrid!5e0!3m2!1ses!2ses!4v1731025880191!5m2!1ses!2ses"
                    width="100%" 
                    height="300" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </div class="content">
    <!-- Sección de contenido con mapa e información relevante -->
    <div class="content">
        <!-- Mapa de Google Maps -->
        <div class="card shadow-sm" style="flex: 1; margin: 0 20px;">
            <div class="card-body">
                <h5 class="card-title">Mapa</h5>
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d194347.47827054537!2d-3.8443426076978033!3d40.438098610155286!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd422997800a3c81%3A0xc436dec1618c2269!2sMadrid!5e0!3m2!1ses!2ses!4v1731025880191!5m2!1ses!2ses"
                    width="100%" 
                    height="300" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>

        <div class="card shadow-sm" style="flex: 1; margin: 0 20px;">
            <div class="card-body">
                <h5 class="card-title">Información sobre {{ results.name }}</h5>
                <div style="height: 300px; overflow-y: auto; overflow-x: hidden;" style="display: flex;">
                    <p><strong>País:</strong> {{ results.country }}</p>
                    <p><strong>Ciudad:</strong> {{ results.city }}</p>
                    <p><strong>Descripción:</strong> {{ results.description }}</p>
                    <p><strong>Latitud:</strong> {{ results.latitude }}, <strong>Longitud:</strong> {{ results.longitude }}</p>
                    <div id="loader"></div>
                    <div class="result" style="overflow: hidden; flex: 1;"></div>
                </div>
            </div>
        </div>

        <div class="card shadow-sm" style="flex: 1; margin: 0 20px;">
            <div class="card-body" style="display: flex; flex-direction: column; flex: 1;">
                <h5 class="card-title">Vuelos hacia {{ results.name }}</h5>
                <!-- Contenedor con scroll -->
                <div class="row row-cols-1 g-3" style="max-height: 320px; overflow-y: auto;">
                    {% for flight in flights %}
                    <div class="col">
                        <div class="card shadow-sm d-flex flex-row align-items-center">
                            <div class="card-body d-flex flex-grow-1 justify-content-between align-items-center">
                                <div class="details" style="flex: 1;">
                                    <h6 class="card-title mb-2">Ida</h6>
                                    <p><strong>Salida:</strong> {{ flight.vuelo_ida.hora_salida }} - 
                                        <strong>Llegada:</strong> {{ flight.vuelo_ida.hora_llegada }}</p>
                                    <p><strong>Duración:</strong> {{ flight.vuelo_ida.duracion }}</p>
                                </div>
                                <div class="details-vuelta" style="flex: 1;">
                                    <h6 class="card-title mb-2">Vuelta</h6>
                                    <p><strong>Salida:</strong> {{ flight.vuelo_vuelta.hora_salida }} - 
                                        <strong>Llegada:</strong> {{ flight.vuelo_vuelta.hora_llegada }}</p>
                                    <p><strong>Duración:</strong> {{ flight.vuelo_vuelta.duracion }}</p>
                                </div>
                                <div class="details-vuelta" style="flex: 1;">
                                    <p><strong>Precio:</strong> {{ flight.precio_individual }} por persona</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col">
                        <p>No hay vuelos disponibles hacia este destino.</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>            
    </div>

    <!-- Footer -->
    {% include 'blog/sections/footer.html' %}
</body>
</html>
